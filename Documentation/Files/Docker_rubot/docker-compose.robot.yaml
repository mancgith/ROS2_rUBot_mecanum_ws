name: rubot_humble

services:
  rubot-humble-container:
    # Construeix la imatge utilitzant el Dockerfile.pc del directori actual
    build:
      context: .
      dockerfile: Dockerfile.robot
    image: robot_humble_image
    container_name: robot-humble-container
    privileged: true
    network_mode: host # Si fas servir 'host', el port ja està obert
    environment:
      - RMW_IMPLEMENTATION=rmw_cyclonedds_cpp # Millor per xarxes wifi amb oscilacions 
    volumes:
      - /dev:/dev # Això permet l'accés a tots els dispositius /dev del host
    entrypoint: /root/rubot_entrypoint.robot.sh
    command: sleep infinity